% arara: xelatex
% arara: xelatex
% arara: xelatex

% options:
% thesis=B bachelor's thesis
% thesis=M master's thesis
% czech thesis in Czech language
% english thesis in English language
% hidelinks remove colour boxes around hyperlinks

\documentclass[thesis=M,english]{FITthesis}[2019/12/23]

\usepackage[utf8]{inputenc}
\usepackage{amsmath} %advanced maths
\usepackage{amssymb} %additional math symbols
\usepackage{lipsum,tikz}
\usepackage[cache=false, outputdir=out]{minted}
\usepackage{listings} % typesetting of sources
\usepackage[fontsize=11pt]{fontsize}
\usepackage{xcolor}
\usepackage{float}
\usepackage{fancyvrb}
\usepackage{todonotes}
\usepackage{pdfpages}

\usemintedstyle{borland}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=4
}

\lstset{style=mystyle}

\usepackage{dirtree} %directory tree visualisation

% tikz thingies
\usetikzlibrary{calc,positioning,arrows,shapes.geometric}
\tikzstyle{process} = [rectangle, 
minimum width=3cm, 
minimum height=1cm, 
text centered, 
text width=3cm, 
draw=black, 
]

\usetikzlibrary{arrows.meta}
\tikzset{>={Latex[width=3mm,length=3mm]}}

% list of acronyms
% \usepackage[acronym,nonumberlist,toc,numberedsection=autolabel,nomain]{glossaries}
%% \iflanguage{czech}{\renewcommand*{\acronymname}{Seznam použitých zkratek}}{}
% \makeglossaries

\newcommand{\tg}{\mathop{\mathrm{tg}}} %cesky tangens
\newcommand{\cotg}{\mathop{\mathrm{cotg}}} %cesky cotangens

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % 
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % 
\department{Department of theoretical computer science}
\title{Tiny86 Debugger}
\authorGN{Filip} %author's given name/names
\authorFN{Gregor} %author's surname
\authorWithDegrees{Bc. Filip Gregor} %author's name with academic degrees
\author{Filip Gregor} %author's name without academic degrees
\supervisor{Ing. Petr Máj}

\acknowledgements{First and foremost, thanks to my parents, who have always
supported me and enabled me to pursue my dreams, whatever they may be. I would
also like to thank my supervisor, who spent an ungodly amount of time and
patience to break through my stubbornness and make this thesis what it is. Last
but not least, thanks to my girlfriend, Jana. Without her support, this work
would never have come to be.}

\abstractCS{
V mnoha univerzitních kurzech se vyučuje návrh překladače. Jeden takový předmět
se vyučuje na FIT ČVUT. Studenti mají za úkol vytvořit kompilátor z jazyka
TinyC podobnému jazyku C do architektury Tiny x86. Tato architektura nemá žádný
procesor, který by ji implementoval. Místo toho používá virtuální stroj.

Aby byl programovací jazyk použitelný, potřebuje vhodné nástroje, například
ladicí programy. Aby ladící program fungovaly, musí překladač emitovat ladicí
informace popisující vazby mezi generovaným kódem a zdrojovým kódem. Virtuální
stroj pro Tiny x86 nenabízí téměř žádnou podporu pro ladění. Studenti tedy
nemají žádný důvod generovat ladicí informace.

Tato práce popisuje, jak je podpora ladění poskytována na různých úrovních,
jako je procesor, operační systém a překladač. Popisuje také, jak vytvořit
velmi jednoduchý ladicí program za použití rozhraní systému Linux a Windows.
Dále je popsána podpora ladění virtuálního stroje Tiny x86, která byla v rámci
práce přídána. Ladící podpora byla inspirována rozhraním které nabízí systém
Linux. Nakonec je vytvořen debugger na úrovni assembleru a zdrojového kódu
inspirovaný návrhem ladících programů z reálného světa.
}
\abstractEN{
Many university courses teach compiler design. One such course is taught at FIT
CTU. The students are tasked to create a compiler from a C-like language called
TinyC into the Tiny x86 architecture. This architecture does not have any
processor that implements it. Instead, it uses a virtual machine.

To make a programming language usable, it needs proper tooling, like debuggers.
For debuggers to work, the compiler must emit debugging information describing
the connections between generated machine code and the source code. The virtual
machine has almost no debugging support. Hence the students do not have any
reason to generate debugging information.

That is about to change. This thesis describes how debugging support is
provided at various levels, like the central processing unit and the operating
system. It also describes how to create a very simple debugger on Linux. We
then add debugging support to the Tiny x86 virtual machine itself, which is
partially inspired by the studied Linux debugging interface. Finally, we create
an assembly and source-level debugger inspired by real-world debuggers' design.
}

\placeForDeclarationOfAuthenticity{Prague} %where you have signed the declaration
\keywordsCS{Ladění, ladící program, Překladač, Implementace ladícího programu, LLVM,
Linux, Windows, Tiny x86, Podpora pro ladění, Chyby v programech}
\keywordsEN{Debugging, Debugger, Debug, Debugger implementation, Compiler, LLVM,
Linux, Windows, Tiny x86, Debugging support, Errors in programs}
\declarationOfAuthenticityOption{4} %select as appropriate, according to the desired license
\website{https://github.com/Gregofi/tinyverse-monorepo}

\begin{document}

% \newacronym{LZW}{LZW}{Lempel Ziv Welch}
% \newacronym{RLE}{RLE}{Run-Length Encoding}

\input{chapters/0}
\input{chapters/1}
\input{chapters/2}
\input{chapters/3}
\input{chapters/4}
\input{chapters/5}

\bibliographystyle{iso690.bst}
\bibliography{ref}

\appendix

% \printglossaries

\chapter{Contents of CD}\label{app:CDcontent}

Visualise the contents of enclosed media. Use of \verb|dirtree| is recommended. Note that directories src and text with appropriate contents are mandatory.

\begin{figure}
	\dirtree{%
		.1 readme.txt\DTcomment{the file with CD contents description}.
		.1 data\DTcomment{the data files directory}.
		.2 graphs\DTcomment{the directory of graphs of experiments}.
		.3 *.eps\DTcomment{the B/W graphs}.
		.3 *.png\DTcomment{the color graphs}.
		.3 *.dat\DTcomment{the graphs data files}.
		.1 exe\DTcomment{the directory with executable WBDCM program}.
		.2 wbdcm\DTcomment{the WBDCM program executable (UNIX)}.
		.2 wbdcm.exe\DTcomment{the WBDCM program executable (Windows)}.
		.1 src\DTcomment{the directory of source codes}.
		.2 wbdcm\DTcomment{the directory of WBDCM program}.
		.3 Makefile\DTcomment{the makefile of WBDCM program (UNIX)}.
		.2 thesis\DTcomment{the directory of \LaTeX{} source codes of the thesis}.
		.3 figures\DTcomment{the thesis figures directory}.
		.3 *.tex\DTcomment{the \LaTeX{} source code files of the thesis}.
		.1 text\DTcomment{the thesis text directory}.
		.2 thesis.pdf\DTcomment{the Diploma thesis in PDF format}.
		.2 thesis.ps\DTcomment{the Diploma thesis in PS format}.
	}
\end{figure}


\end{document}
