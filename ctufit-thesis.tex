%% This is the ctufit-thesis example file. It is used to produce theses
%% for submission to Czech Technical University, Faculty of Information Technology.
%%
%% Get the newest version from
%% https://gitlab.fit.cvut.cz/theses-templates/FITthesis-LaTeX
%%
%%
%% Copyright 2021, Eliska Sestakova and Ondrej Guth
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public Licenese, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%  https://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%%
%% The current maintainer of this work is Ondrej Guth.
%% Contact ondrej.guth@fit.cvut.cz for bug reports.
%% Alternatively, submit bug reports into the tracker at
%% https://gitlab.fit.cvut.cz/theses-templates/FITthesis-LaTeX/issues
%%
%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CLASS OPTIONS
% language: czech/english/slovak
% thesis type: bachelor/master/dissertation
% colour: bw for black&white OR no option for default colour scheme
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[english,master,unicode,bw]{ctufit-thesis}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% FILL IN THIS INFORMATION
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ctufittitle{Tiny86 Debugger}
\ctufitauthorfull{Bc. Filip Gregor}
\ctufitauthorsurnames{Gregor} % replace with your surname(s) / family name(s)
\ctufitauthorgivennames{Filip} % replace with your first name(s) / given name(s)
\ctufitsupervisor{Ing. Petr Máj} % replace with name of your supervisor/advisor (include academic degrees)
\ctufitdepartment{Department of theoretical computer science} % replace with the department of your defence
\ctufityear{2023} % replace with the year of your defence
\ctufitdeclarationplace{Prague} % replace with the place where you sign the declaration
\ctufitdeclarationdate{\today} % replace with the date of signature of the declaration
\ctufitabstractCZE{
Programátoři často potřebují kontrolovat stav svých programů za běhu. Právě pro
tento účel byl vytvořen speciální nástroj zvaný debugger. Přestože je tento
nástroj velmi rozšířen, málokdo ví, jak přesně funguje. Částečně je to proto,
že musí být podporován na více úrovních, jako je procesor, operační systém a
překladač. Většina kurzů, které o nich vyučují, se debugováním nezabývá.

Tato práce zkoumá, jakou podporu musí poskytovat procesor a operační systém,
aby bylo možné provádět debugování na nativní úrovni. Implementace malého
debuggeru je demonstrována na architektuře x86-64 a operačním systému Linux.
Pozornost je poté přesunuta na podporu překladače pro debugování na úrovni
zdrojového kódu.

Na základě těchto poznatků je v práci představen debugger pro architekturu T86
a jazyk TinyC, které jsou využívány v kurzu překladačů NI-GEN na FIT ČVUT.
Tento debugger je plně funkční a usnadňuje studentům práci s architekturou T86.
Kromě toho práce představuje návrh a implementaci nového formátu debugovacích
informací, který zachovává zajímavé koncepty z reálných debuggerů a zároveň je
jeho použití extrémně jednoduché na strojové i lidské úrovni, což je ideální
pro jeho zamýšlené použití ve výuce.
}

\ctufitabstractENG{
Programmers often need to inspect the state of their programs at runtime. A
special tool called a debugger exists precisely for this purpose. Despite its
widespread use, very few know how exactly this tool works. This is partly
because it must be supported at multiple layers, like the CPU, the operating
system, and the compiler. Most of the courses that teach about these do not
delve into debugging.

This thesis explores what support must be provided by the CPU and operating
system to enable native-level debugging. A small debugger implementation is
demonstrated on the x86-64 architecture and the Linux operating system. Focus
is then shifted onto compiler support for source-level debugging.

Using this knowledge, the thesis presents a debugger for the T86 architecture
and the TinyC language, both of which are used by the NI-GEN compilers course
at FIT, CTU. This debugger is fully functional, making it easier for students
to work with the T86. Additionally, the thesis presents a design and
implementation of a novel format of debugging information that keeps the
interesting concepts from real-world debuggers while being extremely simple to
use on both machine and human level, which is ideally suited for its intended
classroom use.
}

\ctufitkeywordsCZE{Debugování, Debugger, Překladač, Implementace debuggeru,
LLVM, Linux, Windows, Tiny x86, Podpora pro debugování, Chyby v programech}
\ctufitkeywordsENG{Debugging, Debugger, Debug, Debugger implementation, Compiler, LLVM,
Linux, Windows, Tiny x86, Debugging support, Errors in programs}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% END FILL IN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CUSTOMIZATION of this template
% Skip this part or alter it if you know what you are doing.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{iftex}[2020/03/06]
\iftutex % XeLaTeX and LuaLaTeX
    \RequirePackage{ellipsis}[2020/05/22] %ellipsis workaround for XeLaTeX
\else
    \RequirePackage[utf8]{inputenc}[2018/08/11] %this file encoding
    \RequirePackage{lmodern}[2009/10/30] % vector flavor of Computer Modern font
\fi

% hyperlinks
\RequirePackage[pdfpagelayout=TwoPageRight,colorlinks=false,allcolors=decoration,pdfborder={0 0 0.1}]{hyperref}[2020-05-15]

% uncomment the following to hide all hyperlinks
% \RequirePackage[pdfpagelayout=TwoPageRight,hidelinks]{hyperref}[2020-05-15]

\RequirePackage{pdfpages}[2020/01/28]

\setcounter{secnumdepth}{4} % numbering sections; 4: subsubsection



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CUSTOMIZATION of this template END
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%
% DEMO CONTENTS SETTINGS
% You may choose to modify this part.
%%%%%%%%%%%%%%%%%%%%%%
\usepackage{dirtree}
\usepackage{lipsum,tikz}
\usepackage{csquotes}
\usepackage[style=iso-numeric]{biblatex}
\addbibresource{text/bib-database.bib}
\usepackage{listings} % typesetting of sources
\usepackage[cache=false, outputdir=out]{minted} % typesetting of sources
\usepackage{todonotes}
\usepackage[fontsize=11pt]{fontsize}
% \usepackage{lmodern}
\usemintedstyle{borland}
% Tikz thingies
\usepackage{multirow}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{array}
% \usepackage{showframe}

\captionsetup[table]{skip=10pt}

\lstdefinestyle{mystyle}{
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=4
}
\lstset{style=mystyle}

\usetikzlibrary{calc,positioning,arrows,shapes.geometric}
\tikzstyle{process} = [rectangle, 
minimum width=3cm, 
minimum height=1cm, 
text centered, 
text width=3cm, 
draw=black, 
]

\usetikzlibrary{arrows.meta}
\tikzset{>={Latex[width=3mm,length=3mm]}}

\begin{document} 
\frontmatter\frontmatterinit % do not remove these two commands

\includepdf[pages={1-}]{assignment-include.pdf} % replace that file with your thesis assignment provided by study office

\thispagestyle{empty}\cleardoublepage\maketitle % do not remove these three commands

\imprintpage % do not remove this command

\tableofcontents % do not remove this command
%%%%%%%%%%%%%%%%%%%%%%
% list of other contents: figures, tables, code listings, algorithms, etc.
% add/remove commands accordingly
%%%%%%%%%%%%%%%%%%%%%%
\listoffigures % list of figures
\begingroup
\let\clearpage\relax
\listoftables % list of tables
% \lstlistoflistings % list of source code listings generated by the listings package
% \listoflistings % list of source code listings generated by the minted package
\endgroup
%%%%%%%%%%%%%%%%%%%%%%
% list of other contents END
%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%
% ACKNOWLEDGMENT
% FILL IN / MODIFY
% This is a place to thank people for helping you. It is common to thank your supervisor.
%%%%%%%%%%%%%%%%%%%
\begin{acknowledgmentpage}
    First and foremost, thanks to my parents, who have always supported me and
    enabled me to pursue my dreams, whatever they may be.

    I would also like to thank my supervisor, who spent an unbelievable amount
    of time and patience to break through my stubbornness and make this thesis
    what it is.

    Last but not least, thanks to my girlfriend, Jana. Without her support,
    this work would never have come to be.
\end{acknowledgmentpage} 
%%%%%%%%%%%%%%%%%%%
% ACKNOWLEDGMENT END
%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%
% DECLARATION
% FILL IN / MODIFY
%%%%%%%%%%%%%%%%%%%
% INSTRUCTIONS
% ENG: choose one of approved texts of the declaration. DO NOT CREATE YOUR OWN. Find the approved texts at https://courses.fit.cvut.cz/SFE/download/index.html#_documents (document Declaration for FT in English)
% CZE/SLO: Vyberte jedno z fakultou schvalenych prohlaseni. NEVKLADEJTE VLASTNI TEXT. Schvalena prohlaseni najdete zde: https://courses.fit.cvut.cz/SZZ/dokumenty/index.html#_dokumenty (prohlášení do ZP)
\begin{declarationpage}
I hereby declare that the presented thesis is my own work and that I have cited all
sources of information in accordance with the Guideline for adhering to ethical
principles when elaborating an academic final thesis.

I acknowledge that my thesis is subject to the rights and obligations stipulated by the
Act No. 121/2000 Coll., the Copyright Act, as amended. In accordance with Article 46(6)
of the Act, I hereby grant a nonexclusive authorization (license) to utilize this thesis,
including any and all computer programs incorporated therein or attached thereto and
all corresponding documentation (hereinafter collectively referred to as the “Work”), to
any and all persons that wish to utilize the Work. Such persons are entitled to use the
Work in any way (including for-profit purposes) that does not detract from its value.
This authorization is not limited in terms of time, location and quantity. However, all
persons that makes use of the above license shall be obliged to grant a license at least
in the same scope as defined above with respect to each and every work that is created
(wholly or in part) based on the Work, by modifying the Work, by combining the Work
with another work, by including the Work in a collection of works or by adapting the
Work (including translation), and at the same time make available the source code of
such work at least in a way and scope that are comparable to the way and scope in
which the source code of the Work is made available.
\end{declarationpage}
%%%%%%%%%%%%%%%%%%%
% DECLARATION END
%%%%%%%%%%%%%%%%%%%

\printabstractpage % do not remove this command


\mainmatter\mainmatterinit % do not remove these two commands

%%%%%%%%%%%%%%%%%%%
% THE THESIS
% MODIFY ANYTHING BELOW THIS LINE
%%%%%%%%%%%%%%%%%%%

\include{text/0}
\include{text/1}
\include{text/2}
\include{text/3}
\include{text/4}
\include{text/5}

% WARNING: If something doesn't work, put these guys back
\appendix\appendixinit % do not remove these two commands

\include{text/appendix} % include `appendix.tex' from `text/' subdirectory

\backmatter % do not remove this command

\printbibliography % print out the BibLaTeX-generated bibliography list

\include{text/medium} % include `medium.tex' from `text/' subdirectory

\end{document}
